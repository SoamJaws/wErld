<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!-- autogenerated by 'erl2html2'. -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<title>/home/travis/build/SoamJaws/wErld/test/client/public_transport/public_transport_SUITE.erl</title>
</head>

<body bgcolor="white" text="black" link="blue" vlink="purple" alink="red">
<pre>
<a name="1"/>    1: <b>-module</b>(public_transport_SUITE).
<a name="2"/>    2: <b>-include</b>(&quot;public_transport.hrl&quot;).
<a name="3"/>    3: <b>-include_lib</b>(&quot;common_test/include/ct.hrl&quot;).
<a name="4"/>    4: <b>-include_lib</b>(&quot;eunit/include/eunit.hrl&quot;). %% For assertion macros
<a name="5"/>    5: 
<a name="6"/>    6: <b>-export</b>([ get_route_case/1
<a name="7"/>    7:         , get_other_end_case/1
<a name="8"/>    8:         , get_next_stop_case/1]).
<a name="9"/>    9: 
<a name="10"/>   10: <b>-export</b>([ all/0
<a name="11"/>   11:         , init_per_testcase/2
<a name="12"/>   12:         , end_per_testcase/2]).
<a name="13"/>   13: 
<a name="all-0"/><a name="all-last_expr"/><a name="14"/>   14: <b>all</b>() -&gt; [get_route_case].
<a name="15"/>   15: 
<a name="init_per_testcase-2"/><a name="16"/>   16: <b>init_per_testcase</b>(TestCase, Config) -&gt;
<a name="17"/>   17:   StopIds = [a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p],
<a name="18"/>   18:   LineSpecs = [ {1, [a, 1, b, 2, c, 1, d, 4, e, 3, f, 2, g], bus}
<a name="19"/>   19:               , {2, [i, 3, h, 2, b, 1, j, 2, k], tram}
<a name="20"/>   20:               , {3, [l, 3, e, 2, m, 1, n], tram}
<a name="21"/>   21:               , {4, [m, 2, o, 3, p], bus}
<a name="22"/>   22:               ],
<a name="23"/>   23:   public_transport_supervisor:start_link(StopIds, LineSpecs),
<a name="init_per_testcase-last_expr"/><a name="24"/>   24:   Config.
<a name="25"/>   25: 
<a name="end_per_testcase-2"/><a name="26"/>   26: <b>end_per_testcase</b>(_TestCase, Config) -&gt;
<a name="end_per_testcase-last_expr"/><a name="27"/>   27:   Config.
<a name="28"/>   28: 
<a name="get_route_case-1"/><a name="29"/>   29: <b>get_route_case</b>(_Config) -&gt;
<a name="get_route_case-last_expr"/><a name="30"/>   30: <b>  timer:tc</b>(fun() -&gt; public_transport:?GET_ROUTE(a, o) end).
<a name="31"/>   31: 
<a name="32"/>   32: 
<a name="get_other_end_case-1"/><a name="33"/>   33: <b>get_other_end_case</b>(Config) -&gt;
<a name="34"/>   34:   LineStops = ets_utils:set_lookup(public_transport, ?LINE_ID(bus, 1)),
<a name="35"/>   35:   [FirstStop|_] = LineStops,
<a name="36"/>   36:   LastStop = lists:last(LineStops),
<a name="37"/>   37:   ?assertEqual(line:?GET_OTHER_END(bus, 1, FirstStop), LastStop),
<a name="get_other_end_case-last_expr"/><a name="38"/>   38: <b>  ?assertEqual</b>(line:?GET_OTHER_END(bus, 1, LastStop), FirstStop).
<a name="39"/>   39: 
<a name="40"/>   40: 
<a name="get_next_stop_case-1"/><a name="41"/>   41: <b>get_next_stop_case</b>(Config) -&gt;
<a name="42"/>   42:   [Stop1, Dur1_2, Stop2, Dur2_3, Stop3] = ets_utils:set_lookup(public_transport, ?LINE_ID(bus, 4)),
<a name="43"/>   43:   ?assertEqual(line:?GET_NEXT_STOP(bus, 4, Stop3, Stop1), {Stop2, Dur1_2}),
<a name="44"/>   44:   ?assertEqual(line:?GET_NEXT_STOP(bus, 4, Stop3, Stop2), {Stop3, Dur2_3}),
<a name="45"/>   45:   ?assertEqual(line:?GET_NEXT_STOP(bus, 4, Stop3, Stop3), none),
<a name="46"/>   46:   ?assertEqual(line:?GET_NEXT_STOP(bus, 4, Stop1, Stop3), {Stop2, Dur2_3}),
<a name="47"/>   47:   ?assertEqual(line:?GET_NEXT_STOP(bus, 4, Stop1, Stop2), {Stop1, Dur1_2}),
<a name="get_next_stop_case-last_expr"/><a name="48"/>   48: <b>  ?assertEqual</b>(line:?GET_NEXT_STOP(bus, 4, Stop1, Stop1), none).
</pre>
</body>
</html>
