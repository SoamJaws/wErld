<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>/home/travis/build/SoamJaws/wErld/.eunit/gen_server_mock.COVER.html</title>
</head><body style='background-color: white; color: black'>
<pre>
File generated from /home/travis/build/SoamJaws/wErld/.eunit/gen_server_mock.erl by COVER 2016-07-05 at 06:37:18

****************************************************************************

        |  -module(gen_server_mock).
        |  -behaviour(gen_server).
        |  -include_lib("eunit/include/eunit.hrl").
        |  
        |  %% Public API
        |  -export([ start_link/2
        |          , start_global/2
        |          , stop/1
        |          , state/1
        |          , expect_call/3
        |          , expect_cast/2
        |          , validate/1]).
        |  
        |  %% gen_server
        |  -export([ init/1
        |          , handle_call/3
        |          , handle_cast/2
        |          , handle_info/2
        |          , terminate/2
        |          , code_change/3]).
        |  
        |  -record(gen_server_mock_state, {id, type, calls = [], casts = [], expectedCalls = [], expectedCasts = [], callReturns = []}).
        |  
        |  %% Public API
        |  
        |  start_link(Id, Type) -&gt;
<font color=red>     0..|    gen_server:start_link(?MODULE, #gen_server_mock_state{id=Id, type=Type}, []).</font>
        |  
        |  start_global(Id, Type) -&gt;
<font color=red>     0..|    gen_server:start_link({global, Id}, ?MODULE, #gen_server_mock_state{id=Id, type=Type}, []).</font>
        |  
        |  stop(Pid) -&gt;
<font color=red>     0..|    gen_server:call(Pid, stop).</font>
        |  
        |  state(Pid) -&gt;
<font color=red>     0..|    gen_server:call(Pid, state).</font>
        |  
        |  expect_call(Pid, Msg, Reply) -&gt;
<font color=red>     0..|    gen_server:cast(Pid, {expectCall, Msg, Reply}).</font>
        |  
        |  expect_cast(Pid, Msg) -&gt;
<font color=red>     0..|    gen_server:cast(Pid, {expectCast, Msg}).</font>
        |  
        |  validate(Pid) -&gt;
<font color=red>     0..|    gen_server:call(Pid, validate).</font>
        |  
        |  %% gen_server
        |  
        |  init(State) -&gt;
<font color=red>     0..|    {ok, State}.</font>
        |  
        |  
        |  handle_call(stop, _From, State) -&gt;
<font color=red>     0..|    {stop, normal, stopped, State};</font>
        |  
        |  handle_call(state, _From, State) -&gt;
<font color=red>     0..|    {reply, {ok, State}, State};</font>
        |  
        |  handle_call(validate, _From, State) -&gt;
<font color=red>     0..|    Calls = State#gen_server_mock_state.calls,</font>
<font color=red>     0..|    Casts = State#gen_server_mock_state.casts,</font>
<font color=red>     0..|    ExpectedCalls = State#gen_server_mock_state.expectedCalls,</font>
<font color=red>     0..|    ExpectedCasts = State#gen_server_mock_state.expectedCasts,</font>
<font color=red>     0..|    Type = State#gen_server_mock_state.type,</font>
<font color=red>     0..|    case Type of</font>
        |      strict -&gt;
<font color=red>     0..|        if</font>
        |          (Calls == ExpectedCalls) and (Casts == ExpectedCasts) -&gt;
<font color=red>     0..|            {reply, true, State};</font>
        |          true -&gt;
<font color=red>     0..|            Id = State#gen_server_mock_state.id,</font>
<font color=red>     0..|            ?debugFmt("Casts and/or calls does not match expectations for strict mock with Id: ~p.~n---- Casts:~n~p~n---- Expected Casts:~n~p~n---- Calls~n~p~n---- Expected Calls~n~p~n", [Id, Casts, ExpectedCasts, Calls, ExpectedCalls]),</font>
<font color=red>     0..|            {reply, false, State}</font>
        |        end;
        |      nice -&gt;
<font color=red>     0..|        AllExpectedCallsMet = lists:all(fun(X) -&gt; lists:member(X, Calls) end, ExpectedCalls),</font>
<font color=red>     0..|        AllExpectedCastsMet = lists:all(fun(X) -&gt; lists:member(X, Casts) end, ExpectedCasts),</font>
<font color=red>     0..|        if</font>
        |          AllExpectedCallsMet and AllExpectedCastsMet -&gt;
<font color=red>     0..|            {reply, true, State};</font>
        |          true -&gt;
<font color=red>     0..|            Id = State#gen_server_mock_state.id,</font>
<font color=red>     0..|            ?debugFmt("One or more expected casts and/or calls were not matched for nice mock with Id: ~p.~n---- Casts:~n~p~n---- Expected Casts:~n~p~n---- Calls~n~p~n---- Expected Calls~n~p~n", [Id, Casts, ExpectedCasts, Calls, ExpectedCalls]),</font>
<font color=red>     0..|            {reply, false, State}</font>
        |        end
        |    end;
        |  
        |  handle_call(Msg, _From, State) -&gt;
<font color=red>     0..|    Calls = State#gen_server_mock_state.calls,</font>
<font color=red>     0..|    CallReturns = State#gen_server_mock_state.callReturns,</font>
<font color=red>     0..|    case CallReturns of</font>
        |      [] -&gt;
<font color=red>     0..|        Id = State#gen_server_mock_state.id,</font>
<font color=red>     0..|        Casts = State#gen_server_mock_state.casts,</font>
<font color=red>     0..|        ExpectedCasts = State#gen_server_mock_state.expectedCasts,</font>
<font color=red>     0..|        ExpectedCalls = State#gen_server_mock_state.expectedCalls,</font>
<font color=red>     0..|        error(io_lib:format("No expected call return when called with ~p in mock with Id: ~p~n---- Casts:~n~p~n---- Expected Casts:~n~p~n---- Calls~n~p~n---- Expected Calls~n~p~n---- Call Returns~n~p~n", [Msg, Id, Casts, ExpectedCasts, Calls, ExpectedCalls, CallReturns]));</font>
        |      _ -&gt;
<font color=red>     0..|        {reply, lists:last(CallReturns), State#gen_server_mock_state{calls=[Msg|Calls], callReturns=lists:droplast(CallReturns)}}</font>
        |    end.
        |  
        |  
        |  handle_cast({expectCall, Msg, Reply}, State) -&gt;
<font color=red>     0..|    ExpectedCalls = State#gen_server_mock_state.expectedCalls,</font>
<font color=red>     0..|    CallReturns = State#gen_server_mock_state.callReturns,</font>
<font color=red>     0..|    {noreply, State#gen_server_mock_state{expectedCalls=[Msg|ExpectedCalls], callReturns=[Reply|CallReturns]}};</font>
        |  
        |  handle_cast({expectCast, Msg}, State) -&gt;
<font color=red>     0..|    ExpectedCasts = State#gen_server_mock_state.expectedCasts,</font>
<font color=red>     0..|    {noreply, State#gen_server_mock_state{expectedCasts=[Msg|ExpectedCasts]}};</font>
        |  
        |  handle_cast(Msg, State) -&gt;
<font color=red>     0..|    Casts = State#gen_server_mock_state.casts,</font>
<font color=red>     0..|    {noreply, State#gen_server_mock_state{casts=[Msg|Casts]}}.</font>
        |  
        |  
        |  handle_info(_Info, State) -&gt;
<font color=red>     0..|    {noreply, State}.</font>
        |  
        |  
        |  terminate(_Reason, _State) -&gt;
<font color=red>     0..|    ok.</font>
        |  
        |  
        |  code_change(_OldVsn, State, _Extra) -&gt;
<font color=red>     0..|    {ok, State}.</font>
</pre>
</body>
</html>
